import{_ as c,k as p,aK as f,r as h,o as n,c as i,F as A,z as v,g as d,f as g}from"./bootstrap-5b74a21d.mjs";import{u as y,a as L}from"./useGAMWelcomeAd-08354075.mjs";import{u as l}from"./useGAMNativeAd-ef537421.mjs";import _ from"./GAMController-b4af3b0c.mjs";import"./useContainerPixelWidth-5aa56ad1.mjs";import"./useWindowDimensions-da63f265.mjs";const M={extends:_,props:{pageLevel:{type:String,required:!0,validator:t=>["top","secondary","none"].includes(t)}},setup(){return{page:p("page")}},computed:{adUnits(){if(this.pageLevel==="none")return[];const t=({type:s})=>this.$constants.PAGE_AD_TYPES.includes(s),e=({loadOnSecondaryPage:s})=>{if(this.pageLevel==="top")return!0;if(this.pageLevel==="secondary")return s};return f().value.filter(t).filter(e)}},mounted(){window.addEventListener("message",this.onMessage)},unmounted(){window.removeEventListener("message",this.onMessage)},methods:{onMessage({data:t}){if(typeof t=="string")try{const e=JSON.parse(t);"adSkinType"in e?y.add(e):(e==null?void 0:e.adType)==="welcomeAdImage"||(e==null?void 0:e.adType)==="welcomeAdTag"?L.update(e):"nativeTitle"in e&&(this.adUnits.some(a=>a.type==="content-list-native"&&this.valid(a))&&l.addNativeListItem(e),this.adUnits.some(a=>a.type==="content-body-native"&&this.valid(a))&&l.addNativeBody(e))}catch{}},valid(t){return t&&this.gamBasePath&&this.gamAccountId&&((t==null?void 0:t.type)==="layout-block"||this.allowedOnPage(t))}}},k={key:0};function S(t,e,s,m,a,r){const u=h("LazyGAMSlotBuilder");return s.pageLevel!=="none"?(n(),i("div",k,[(n(!0),i(A,null,v(r.adUnits,o=>(n(),i("div",{key:o.id},[r.valid(o)?(n(),g(u,{key:0,"container-pixel-width":0,"ad-unit":o,path:t.makePath(o),onIframeLoaded:t.onLoad},null,8,["ad-unit","path","onIframeLoaded"])):d("",!0)]))),128))])):d("",!0)}var b=c(M,[["render",S]]);export{b as default};
