var O=Object.defineProperty,F=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var I=(e,n,t)=>n in e?O(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,h=(e,n)=>{for(var t in n||(n={}))j.call(n,t)&&I(e,t,n[t]);if(C)for(var t of C(n))H.call(n,t)&&I(e,t,n[t]);return e},W=(e,n)=>F(e,D(n));import{a as w,u as J}from"./useGAMWelcomeAd-08354075.mjs";import{L as V,P as X,_ as q,B as K,aK as Q,R as L,M as P,r as m,o as a,c as l,n as k,g as o,b as c,f as b,a as p,h as Y,F as x,z as T,w as Z,A as $,p as ee,d as te,e as se}from"./bootstrap-5b74a21d.mjs";import{u as v}from"./useWindowDimensions-da63f265.mjs";import{u as ne}from"./useGTM-2ace1274.mjs";import{u as M}from"./useUUID-9e573207.mjs";import ie from"./GamWelcomeAd-e03b7e28.mjs";import ae from"./WebButtonElement-494f5f14.mjs";import"./GAMController-b4af3b0c.mjs";import"./useContainerPixelWidth-5aa56ad1.mjs";const G=()=>(V(),X("isPhone"));const le={name:"WebPageContent",props:{page:{type:Object,default:()=>({id:"",layoutType:{type:""},loadMoreType:{type:"none"},primaryGrid:{rows:[{settings:{},columns:[{settings:{},blocks:[]}]}]},secondaryGrid:{rows:[{settings:{},columns:[{settings:{},blocks:[]}]}]}})},includeReskin:{type:Boolean,default:!0},includeShell:{type:Boolean,default:!0},previewMode:{type:Boolean,default:!1},pageLevel:{type:String,default:"top",validator:e=>["top","secondary","none"].includes(e)},fullHeight:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!1}},setup(e){K("page",h({},e.page))},data(){var e,n,t,d;return{gamWelcomeAd:w(),isMounted:!1,loadingMore:!1,secondaryGrids:[],secondaryPages:[],excludeContentIds:(n=(e=this==null?void 0:this.page)==null?void 0:e.usedContentIds)!=null?n:[],excludeIssueIds:(d=(t=this==null?void 0:this.page)==null?void 0:t.usedIssueIds)!=null?d:[],adUnitPatterns:Q().value,allowPaging:!0,siteskinStyle:{top:"",position:"fixed"}}},computed:{pageWidth(){return v().value.pageWidth},cmsUser(){return L()},skinAd(){return J().value},isSiteskinActive(){var n,t;let e=parseInt((n=this.skinAd)==null?void 0:n.adSkinWidth);return isNaN(e)&&(e=160),!this.fullWidth&&((t=this.skinAd)==null?void 0:t.adSkinType)==="siteskin"&&this.includeReskin&&this.includeShell&&v().value.windowWidth>this.$ss.general.siteWidth+e*2+16},isReskinActive(){var e;return((e=this.skinAd)==null?void 0:e.adSkinType)==="reskin"&&this.includeReskin},siteSkinTop(){let e=90;return this.cmsUser.username&&(e+=30),this.$ss.menu.header_primary.links.length&&(e+=45),e+"px"},loadType(){var e,n,t;return(t=(n=(e=this.page)==null?void 0:e.loadMoreType)==null?void 0:n.type)!=null?t:"none"},triggerLoadMore(){return this.loadType&&this.loadType!=="none"&&this.secondaryPages.length<this.$ss.general.maxPageScrolls&&this.secondaryGrids.length<this.$ss.general.maxPageScrolls&&this.allowPaging},pageBackgroundColor(){return this.$ss.baseStyles.bodyBackgroundColor},pageClasses(){return["ebm-page",this.cmsUser.username?"ebm-page--logged-in":""]},style(){return`<style>
      @import url('/fonts/${this.$ss.baseStyles.primaryFont}.css');
      a { color: ${this.$ss.baseStyles.linkColor}; }
      .ebm-page__main h1, .ebm-page__main h2, .ebm-page__main h3, .ebm-page__main h4,
      .ebm-page__main h5, .ebm-page__main h6 {
        font-family: ${this.$ss.primaryFontFamily};
      }
      button, .ebm-button-wrapper { font-family: ${this.$ss.primaryFontFamily}; }
      </style>`},hasUnrenderedSecondary(){return this.secondaryPages.length&&this.secondaryPages[this.secondaryPages.length-1].render===!1||this.secondaryGrids.length&&this.secondaryGrids[this.secondaryGrids.length-1].render===!1}},unmounted(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.positionSiteskin)},created(){var e;v().value,v({pageWidth:G().value?360:1300,windowWidth:(e=P("windowWidth").value)!=null?e:G().value?360:1300})},mounted(){this.isMounted=!0;const e=P("auth");e&&L(e),this.handleResize(),window.addEventListener("resize",this.handleResize),this.loadType&&this.loadType!=="none"&&(window.addEventListener("scroll",this.handleScroll),this.loadPage()),window.addEventListener("scroll",this.positionSiteskin),this.positionSiteskin(),this.siteskinStyle.top=this.siteSkinTop,this.previewMode||ne.trackEvent(this.page)},methods:{closeWelcomeAd(){w.reset()},handleScroll(e){const n=document.querySelector(".ebm-page__load-more");if(!n){window.removeEventListener("scroll",this.handleScroll);return}const t=document.documentElement.clientHeight-n.getBoundingClientRect().y;(this.loadType==="custom-scroll"||this.loadType==="page-scroll")&&t>=-250&&!this.loadingMore&&this.renderPage()},positionSiteskin(){const e=d=>{const i=this.$refs.layout,s=this.$refs.header.$el,y=d.getBoundingClientRect().top,u=d.getBoundingClientRect().bottom,r=s.getBoundingClientRect().bottom,_=i.getBoundingClientRect().bottom;if(y>r+24){this.siteskinStyle={top:`${r+24}px`,position:"fixed"};return}u>_&&(this.siteskinStyle={bottom:"0px",position:"absolute"})},{siteskinLeft:n,siteskinRight:t}=this.$refs;n&&e(n),t&&e(t)},handleResize(){var e,n;((n=(e=this.$refs)==null?void 0:e.main)==null?void 0:n.clientWidth)>0?v({windowWidth:window.innerWidth,windowHeight:window.innerHeight,pageWidth:this.$refs.main.clientWidth}):setTimeout(this.handleResize,250)},renderPage(){if(this.loadType==="custom-click"||this.loadType==="custom-scroll"){const e=[...this.secondaryGrids];e[e.length-1].render=!0,this.secondaryGrids=[...e]}else if(this.page.pageData.type!=="section"){const e=[...this.secondaryPages];e[e.length-1].render=!0,this.secondaryPages=[...e]}this.triggerLoadMore&&!this.loadingMore&&this.loadPage()},async loadPage(){var e,n,t;if(this.loadingMore=!0,this.loadType==="custom-click"||this.loadType==="custom-scroll"){const d=M();this.secondaryGrids.push({id:d,render:!1});const{pageData:i,secondaryGrid:s}=this.page,y={excludeContentIds:this.excludeContentIds,excludeIssueIds:this.excludeIssueIds,sectionId:(n=i==null?void 0:i.sectionId)!=null?n:(e=i==null?void 0:i.primarySection)==null?void 0:e.id,defaultContentTypes:(t=this.$ss.contentStyle)==null?void 0:t.defaultContentTypes},{nextSecondaryGrid:u,hasUnderFilledBlocks:r,excludeContentIds:_,excludeIssueIds:A}=await this.$page.getNextSecondaryGrid({gridSettings:y,pageData:i,secondaryGrid:s});this.allowPaging=!r;const f=this.secondaryGrids.findIndex(S=>S.id===d);this.secondaryGrids[f]=h(h({},JSON.parse(JSON.stringify(this.secondaryGrids[f]))),JSON.parse(JSON.stringify(u))),this.excludeContentIds=_,this.excludeIssueIds=A}else if(this.page.pageData.type!=="section"){const d=M();this.secondaryPages.push({id:d,render:!1});const{pageData:i}=this.page,s=[this.page.pageData.id];this.secondaryPages.forEach(r=>{r.render&&s.push(r.pageData.id)});const y={limit:1,includeContentTypes:[i.type],excludeContentIds:s,sectionId:i.primarySection.id,sortField:"published",sortOrder:"desc"},u=await this.$page.getNextSecondaryPage({nextSecondaryPageSettings:y});if(!u)this.allowPaging=!1;else{this.excludeContentIds=u.usedContentIds,this.excludeIssueIds=u.usedIssueIds;const r=this.secondaryPages.findIndex(_=>_.id===d);this.secondaryPages[r]=h(h({},JSON.parse(JSON.stringify(this.secondaryPages[r]))),JSON.parse(JSON.stringify(u)))}}this.loadingMore=!1,this.hasUnrenderedSecondary&&this.handleScroll()}}},oe=e=>(ee("data-v-e9e7d366"),e=e(),te(),e),de=["href"],re=["innerHTML"],ce={ref:"layout",class:"ebm-page__layout"},ge=["href","alt"],he=["href","alt"],ue={class:"ebm-page__page"},me={class:"ebm-page__content-wrapper"},pe={key:0,class:"ebm-page__reskin-ad"},ye=["href","alt"],_e={class:"ebm-page__primary"},fe={key:2},ke={key:0,class:"ebm-page__load-more"},be={key:0,class:"ebm-page__load-more__label"},ve=oe(()=>c("div",null,"Loading Content",-1)),Se={key:1,class:"ebm-page__load-more__label"},Ae={key:1};function We(e,n,t,d,i,s){const y=m("LazyWebHeader"),u=m("LazyGAMSetup"),r=ie,_=m("LazyGAMPageAds"),A=m("LazyGAMStickyAd"),f=m("LazyWebImgLazyLoader"),S=m("LazyWebGrid"),z=m("LazyWebGtmEventTrigger"),B=m("LazyWebPageContent"),R=se,N=ae,U=m("LazyWebFooter");return a(),l("div",{class:$(s.pageClasses),style:k({backgroundColor:t.includeShell?s.pageBackgroundColor:"",fontFamily:e.$constants.FONTS[e.$ss.baseStyles.secondaryFont].css,minHeight:t.fullHeight?"100vh":0})},[s.isReskinActive?(a(),l("a",{key:0,href:s.skinAd.adClickUrl,style:k({backgroundImage:s.skinAd.backgroundImagePath?"url("+s.skinAd.backgroundImagePath+")":"none"}),target:"_blank",rel:"noopener noreferrer",class:"ebm-page__reskin-background"},null,12,de)):o("",!0),c("div",{type:"style",innerHTML:s.style},null,8,re),t.includeShell?(a(),b(y,{key:1,ref:"header",page:t.page,"cms-username":s.cmsUser.username,"include-shell":t.includeShell},null,8,["page","cms-username","include-shell"])):o("",!0),t.pageLevel==="top"?(a(),b(u,{key:2,page:t.page},null,8,["page"])):o("",!0),i.gamWelcomeAd.adType?(a(),b(r,{key:3,"ad-info":i.gamWelcomeAd,onClose:s.closeWelcomeAd},null,8,["ad-info","onClose"])):o("",!0),p(_,{"page-level":t.pageLevel,"available-space":s.pageWidth},null,8,["page-level","available-space"]),t.pageLevel==="top"?(a(),b(A,{key:4,"percent-of-content-area":100})):o("",!0),c("div",ce,[s.isSiteskinActive?(a(),l("div",{key:0,ref:"siteskinLeft",class:"ebm-page__siteskin-ad ebm-page__siteskin-ad__left",style:k(h({transform:`translateX(-${e.$ss.general.siteWidth/2}px)`},i.siteskinStyle))},[c("a",{href:s.skinAd.adLeftColumnUrl,alt:s.skinAd.adTitle,target:"_blank"},[p(f,{src:s.skinAd.adLeftColumnImage,alt:s.skinAd.adTitle},null,8,["src","alt"])],8,ge)],4)):o("",!0),s.isSiteskinActive?(a(),l("div",{key:1,ref:"siteskinRight",class:"ebm-page__siteskin-ad ebm-page__siteskin-ad__right",style:k(h({transform:`translateX(${e.$ss.general.siteWidth/2}px)`},i.siteskinStyle))},[c("a",{href:s.skinAd.adRightColumnUrl,alt:s.skinAd.adTitle,target:"_blank"},[p(f,{src:s.skinAd.adRightColumnImage,alt:s.skinAd.adTitle},null,8,["src","alt"])],8,he)],4)):o("",!0),c("div",ue,[c("div",{ref:"main",class:"ebm-page__main",style:k({maxWidth:t.fullWidth?"100%":e.$ss.general.siteWidth+"px"})},[c("div",me,[s.isReskinActive?(a(),l("div",pe,[c("a",{href:s.skinAd.adClickUrl,alt:s.skinAd.adTitle,target:"_blank"},[p(f,{src:s.skinAd.adImagePath,style:{marginLeft:"auto",marginRight:"auto"}},null,8,["src"])],8,ye)])):o("",!0),c("div",{class:"ebm-page__content",style:k({margin:i.secondaryGrids.length===0&&i.secondaryPages.length===0?"0 10px 20px 10px":"0 10px",padding:s.pageWidth>600?"0 10px":"0",backgroundColor:s.isReskinActive?e.$ss.baseStyles.bodyBackgroundColor:"transparent"})},[c("div",null,[Y(e.$slots,"default",{},void 0,!0)]),c("div",_e,[p(S,{grid:t.page.primaryGrid,page:t.page,"is-reskin-active":s.isReskinActive,"full-width":t.fullWidth},null,8,["grid","page","is-reskin-active","full-width"])]),(a(!0),l(x,null,T(i.secondaryGrids,g=>(a(),l("div",{key:g.id,class:"ebm-page__secondary"},[g.render&&g.rows?(a(),l("div",{key:g.render},[p(z,{event:"page_load"}),p(S,{grid:g,page:t.page,"is-reskin-active":s.isReskinActive,"full-width":t.fullWidth},null,8,["grid","page","is-reskin-active","full-width"])])):o("",!0)]))),128))],4)])],4)]),(a(!0),l(x,null,T(i.secondaryPages,(g,E)=>(a(),l("div",{key:E++,class:"ebm-page__secondary"},[g.render&&g.pageData?(a(),b(B,{key:g.id,page:JSON.parse(JSON.stringify(W(h({},g),{pageData:W(h({},g.pageData),{route:h({},t.page.pageData.route)})}))),"include-shell":!1,"page-level":"secondary"},null,8,["page"])):o("",!0)]))),128)),s.triggerLoadMore||s.hasUnrenderedSecondary?(a(),l("div",fe,[s.loadType&&s.loadType!=="none"?(a(),l("div",ke,[p(N,{color:e.$ss.baseStyles.primaryColor,onOnClick:s.renderPage},{default:Z(()=>[i.loadingMore?(a(),l("div",be,[ve,p(R,{icon:"ei:spinner-3"})])):(a(),l("div",Se,"Load More Content"))]),_:1},8,["color","onOnClick"])])):o("",!0),s.loadType==="custom-scroll"||s.loadType==="page-scroll"?(a(),l("div",Ae)):o("",!0)])):o("",!0)],512),t.includeShell?(a(),b(U,{key:5,ref:"footer"},null,512)):o("",!0)],6)}var Be=q(le,[["render",We],["__scopeId","data-v-e9e7d366"]]);export{Be as default};
